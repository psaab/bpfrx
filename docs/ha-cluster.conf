groups {
    node0 {
        system {
            host-name bpfrx-fw0;
        }
        chassis {
            cluster {
                node 0;
                peer-address 10.99.0.2;
                fabric-peer-address 10.99.1.2;
            }
        }
        interfaces {
            fxp0 {
                unit 0 { family inet { dhcp; } }
            }
            fxp1 {
                unit 0 { family inet { address 10.99.0.1/30; } }
            }
            fab0 {
                unit 0 { family inet { address 10.99.1.1/30; } }
            }
            ge-0/0/0 {
                gigether-options { redundant-parent reth1; }
            }
            ge-0/0/1 {
                gigether-options { redundant-parent reth0; }
            }
        }
    }
    node1 {
        system {
            host-name bpfrx-fw1;
        }
        chassis {
            cluster {
                node 1;
                peer-address 10.99.0.1;
                fabric-peer-address 10.99.1.1;
            }
        }
        interfaces {
            fxp0 {
                unit 0 { family inet { dhcp; } }
            }
            fxp1 {
                unit 0 { family inet { address 10.99.0.2/30; } }
            }
            fab0 {
                unit 0 { family inet { address 10.99.1.2/30; } }
            }
            ge-7/0/0 {
                gigether-options { redundant-parent reth1; }
            }
            ge-7/0/1 {
                gigether-options { redundant-parent reth0; }
            }
        }
    }
}
apply-groups "${node}";
chassis {
    cluster {
        cluster-id 1;
        reth-count 2;
        heartbeat-interval 1000;
        heartbeat-threshold 3;
        control-interface fxp1;
        fabric-interface fab0;
        configuration-synchronize;
        redundancy-group 0 {
            node 0 priority 200;
            node 1 priority 100;
            preempt;
            interface-monitor {
                reth0 weight 255;
                reth1 weight 128;
            }
        }
    }
}
interfaces {
    reth0 {
        redundant-ether-options { redundancy-group 0; }
        unit 0 { family inet { address 172.16.50.10/24; } }
    }
    reth1 {
        redundant-ether-options { redundancy-group 0; }
        unit 0 { family inet { address 10.0.60.1/24; } }
    }
}
security {
    flow { allow-dns-reply; allow-embedded-icmp; }
    zones {
        security-zone mgmt {
            interfaces { fxp0; }
            host-inbound-traffic { system-services { ssh; ping; dhcp; } }
        }
        security-zone control {
            interfaces { fxp1; fab0; }
            host-inbound-traffic { system-services { ping; } }
        }
        security-zone wan {
            interfaces { reth0; }
            host-inbound-traffic { system-services { ping; } }
        }
        security-zone lan {
            interfaces { reth1; }
            host-inbound-traffic { system-services { ssh; ping; dhcp; } }
        }
    }
    policies {
        default-policy deny-all;
        from-zone lan to-zone wan {
            policy allow-all {
                match { source-address any; destination-address any; application any; }
                then { permit; log { session-init; session-close; } }
            }
        }
    }
    nat {
        source {
            rule-set lan-to-wan {
                from zone lan;
                to zone wan;
                rule snat {
                    match { source-address 0.0.0.0/0; }
                    then { source-nat { interface; } }
                }
            }
        }
    }
}
routing-options {
    static { route 0.0.0.0/0 { next-hop 172.16.50.1; } }
}
system {
    services {
        dhcp-local-server {
            group lan-pool {
                interface reth1;
                pool lan-range {
                    subnet 10.0.60.0/24;
                    address-range low 10.0.60.100 high 10.0.60.199;
                    router 10.0.60.1;
                    dns-server 8.8.8.8;
                }
            }
        }
    }
}
